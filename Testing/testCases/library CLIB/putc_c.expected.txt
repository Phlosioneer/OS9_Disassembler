    0  00000 0000            psect  putc_c,0,0,0,0,putc 
    1
    2  00000 4e55 putc:      link.w a5,#0      
    3  00001 0000 L00001     equ    *-3        
    4  00004 48e7            movem.l a0/a2/d0-d1,-(sp) 
    5  00008 2441            movea.l d1,a2      
    6  0000a 302a            move.w 12(a2),d0  
    7  0000e 48c0            ext.l  d0         
    8  00010 0280            andi.l #$00008022,d0 
    9  00016 0c80            cmpi.l #32770,d0  
   10  0001c 6714            beq.s  L00032     
   11  0001e 7022            moveq  #34,d0     
   12  00020 c06a            and.w  12(a2),d0  
   13  00024 0c40            cmpi.w #2,d0      
   14  00028 6600            bne.w  L0009a     
   15  0002c 200a            move.l a2,d0      
   16  0002e 6100            bsr.w  _setbase   
   17  00032 082a L00032     btst.b #2,13(a2)  
   18  00038 6726            beq.s  L00060     
   19  0003a 4878            pea    (L00001).w 
   20  0003e 41ef            lea    7(sp),a0   
   21  00042 2208            move.l a0,d1      
   22  00044 306a            movea.w 14(a2),a0  
   23  00048 2008            move.l a0,d0      
   24  0004a 206a            movea.l 24(a2),a0  
   25  0004e 4e90            jsr    (a0)       
   26  00050 588f            addq.l #4,sp      
   27  00052 72ff            moveq  #255,d1    
   28  00054 b280            cmp.l  d0,d1      
   29  00056 6646            bne.s  L0009e     
   30  00058 08ea            bset.b #5,13(a2)  
   31  0005e 603a            bra.s  L0009a     
   32  00060 302a L00060     move.w 12(a2),d0  
   33  00064 48c0            ext.l  d0         
   34  00066 0800            btst.l #8,d0      
   35  0006a 6606            bne.s  L00072     
   36  0006c 200a            move.l a2,d0      
   37  0006e 6100            bsr.w  _flsbuf    
   38  00072 2052 L00072     movea.l (a2),a0    
   39  00074 5292            addq.l #1,(a2)    
   40  00076 10af            move.b 3(sp),(a0) 
   41  0007a 2012            move.l (a2),d0    
   42  0007c b0aa            cmp.l  8(a2),d0   
   43  00080 640e            bcc.s  L00090     
   44  00082 082a            btst.b #7,13(a2)  
   45  00088 6614            bne.s  L0009e     
   46  0008a 700d            moveq  #13,d0     
   47  0008c b097            cmp.l  (sp),d0    
   48  0008e 660e            bne.s  L0009e     
   49  00090 200a L00090     move.l a2,d0      
   50  00092 6100            bsr.w  _flsbuf    
   51  00096 4a80            tst.l  d0         
   52  00098 6704            beq.s  L0009e     
   53  0009a 70ff L0009a     moveq  #255,d0    
   54  0009c 6002            bra.s  L000a0     
   55  0009e 2017 L0009e     move.l (sp),d0    
   56  000a0 4ced L000a0     movem.l -8(a5),a0/a2 
   57  000a6 4e5d            unlk   a5         
   58  000a8 4e75            rts               
   59  000aa 4e55 putw:      link.w a5,#0      
   60  000ae 48e7            movem.l a2/d0-d1/d4,-(sp) 
   61  000b2 2800            move.l d0,d4      
   62  000b4 2441            movea.l d1,a2      
   63  000b6 220a            move.l a2,d1      
   64  000b8 2004            move.l d4,d0      
   65  000ba e088            lsr.l  #8,d0      
   66  000bc 6100            bsr.w  putc       
   67  000c0 220a            move.l a2,d1      
   68  000c2 2004            move.l d4,d0      
   69  000c4 6100            bsr.w  putc       
   70  000c8 4ced            movem.l -8(a5),a2/d4 
   71  000ce 4e5d            unlk   a5         
   72  000d0 4e75            rts               
   73  000d2 4e55 _tidyup:   link.w a5,#0      
   74  000d6 48e7            movem.l a0/a2/d0,-(sp) 
   75  000da 45ee            lea    _iob(a6),a2 
   76  000de 600a            bra.s  L000ea     
   77  000e0 200a L000e0     move.l a2,d0      
   78  000e2 6118            bsr.s  fclose     
   79  000e4 d5fc            adda.l #28,a2     
   80  000ea 41ee L000ea     lea    _iob+896(a6),a0 
   81  000ee b1ca            cmpa.l a2,a0      
   82  000f0 62ee            bhi.s  L000e0     
   83  000f2 4ced            movem.l -8(a5),a0/a2 
   84  000f8 4e5d            unlk   a5         
   85  000fa 4e75            rts               
   86  000fc 4e55 fclose:    link.w a5,#0      
   87  00100 48e7            movem.l a0/a2/d0/d4,-(sp) 
   88  00104 2440            movea.l d0,a2      
   89  00106 7800            moveq  #0,d4      
   90  00108 200a            move.l a2,d0      
   91  0010a 6762            beq.s  L0016e     
   92  0010c 302a            move.w 12(a2),d0  
   93  00110 48c0            ext.l  d0         
   94  00112 0800            btst.l #15,d0     
   95  00116 6712            beq.s  L0012a     
   96  00118 082a            btst.b #1,13(a2)  
   97  0011e 6710            beq.s  L00130     
   98  00120 200a            move.l a2,d0      
   99  00122 6100            bsr.w  fflush     
  100  00126 2800            move.l d0,d4      
  101  00128 6006            bra.s  L00130     
  102  0012a 4a6a L0012a     tst.w  12(a2)     
  103  0012e 670a            beq.s  L0013a     
  104  00130 306a L00130     movea.w 14(a2),a0  
  105  00134 2008            move.l a0,d0      
  106  00136 6100            bsr.w  close      
  107  0013a 302a L0013a     move.w 12(a2),d0  
  108  0013e 48c0            ext.l  d0         
  109  00140 0800            btst.l #9,d0      
  110  00144 6708            beq.s  L0014e     
  111  00146 202a            move.l 4(a2),d0   
  112  0014a 6100            bsr.w  free       
  113  0014e 7000 L0014e     moveq  #0,d0      
  114  00150 2540            move.l d0,8(a2)   
  115  00154 2480            move.l d0,(a2)    
  116  00156 2540            move.l d0,4(a2)   
  117  0015a 3540            move.w d0,12(a2)  
  118  0015e 3540            move.w d0,18(a2)  
  119  00162 2540            move.l d0,24(a2)  
  120  00166 2540            move.l d0,20(a2)  
  121  0016a 2004            move.l d4,d0      
  122  0016c 6002            bra.s  L00170     
  123  0016e 70ff L0016e     moveq  #255,d0    
  124  00170 4ced L00170     movem.l -12(a5),a0/a2/d4 
  125  00176 4e5d            unlk   a5         
  126  00178 4e75            rts               
  127
  128  0017a 0000            ends              
  128
